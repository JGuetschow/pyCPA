

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyCPA.readData package &mdash; pyCPA 0+untagged.22.gb54d30c.dirty documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyCPA.tools package" href="pyCPA.tools.html" />
    <link rel="prev" title="pyCPA.core package" href="pyCPA.core.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> pyCPA
          

          
          </a>

          
            
            
              <div class="version">
                0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pyCPA.core.html">pyCPA.core package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyCPA.readData package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-pyCPA.readData">pyCPA.readData module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyCPA.tools.html">pyCPA.tools package</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyCPA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>pyCPA.readData package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/JGuetschow/pyCPA/blob/master/docs/sourcepyCPA.readData.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pycpa-readdata-package">
<h1>pyCPA.readData package<a class="headerlink" href="#pycpa-readdata-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-pyCPA.readData">
<span id="pycpa-readdata-module"></span><h2>pyCPA.readData module<a class="headerlink" href="#module-pyCPA.readData" title="Permalink to this headline">¶</a></h2>
<p>Created on Fri Apr  3 21:57:09 2020</p>
<p>&#64;author: Johannes Gütschow, <a class="reference external" href="mailto:mail&#37;&#52;&#48;johannes-guetschow&#46;de">mail<span>&#64;</span>johannes-guetschow<span>&#46;</span>de</a></p>
<dl class="function">
<dt id="pyCPA.readData.read_wide_csv_file">
<code class="descclassname">pyCPA.readData.</code><code class="descname">read_wide_csv_file</code><span class="sig-paren">(</span><em>file</em>, <em>folder</em>, <em>col_rename: dict = {}</em>, <em>col_defaults: dict = {}</em>, <em>meta_mapping: dict = {}</em>, <em>filter_keep: dict = {}</em>, <em>filter_remove: dict = {}</em><span class="sig-paren">)</span> &#x2192; scmdata.run.ScmRun<a class="reference internal" href="_modules/pyCPA/readData/read_data.html#read_wide_csv_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyCPA.readData.read_wide_csv_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads a csv file and returns the data as an ScmDataFrame</p>
<p>Columns can be renamed or filled with default vales to match the pyCPA structure.
The individual files are read using “read_wide_csv_data”</p>
<p>Currently duplicate datapoint will not be detected</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file</strong> – String containing the file name</li>
<li><strong>folder</strong> – String with folder name to read from</li>
<li><strong>col_rename</strong> – Dict where the keys are column names in the files to be read and the value is the column file
in the output dataframe. Use ‘DROP’ as value to remove a column. Default = empty</li>
<li><strong>col_defaults</strong> – Dict for default values of columns not given in the csv files. The keys are the column names and
the values are the values for the columns. Default: empty</li>
<li><strong>meta_mapping</strong> – <p>A dict with pyCPA column names as keys. Values are dicts with input values as
keys and output values as values. A standard use case is to map gas names from
input data to the standardized names used in pyCPA / scmdata. Default: empty
Example:
meta_mapping = {</p>
<blockquote>
<div><dl class="docutils">
<dt>’pyCPA_col_1’: {‘col_1_value_1_in’: ‘col_1_value_1_out’,</dt>
<dd>’col_1_value_2_in’: ‘col_1_value_2_out’,
},</dd>
<dt>’pyCPA_col_2’: {‘col_2_value_1_in’: ‘col_2_value_1_out’,</dt>
<dd>’col_2_value_2_in’: ‘col_2_value_2_out’,
},</dd>
</dl>
</div></blockquote>
<p>}</p>
</li>
<li><strong>filter_keep</strong> – <p>Dict defining filters of data to keep. Filtering is done after metadata mapping,
so use mapped metadata values to define the filter. Column names are pyCPA columns.
Each entry in the dict defines an individual filter. The names of the filters have no
relevance. Default: empty
Example:
filter_keep = {</p>
<blockquote>
<div>’f_1’: {‘variable’: [‘CO2’, ‘CH4’], ‘region’: ‘USA’},
‘f_2’: {‘variable’: ‘N2O’}
} # this example filter keeps all CO2 and CH4 data for the USA and N2O data for all countries</div></blockquote>
</li>
<li><strong>filter_remove</strong> – <p>Dict defining filters of data to remove. Filtering is done after metadata mapping,
so use mapped metadata values to define the filter. Column names are pyCPA columns.
Each entry in the dict defines an individual filter. The names of the filters have no
relevance. Default: empty
Example:
filter_remove = {</p>
<blockquote>
<div>’f_1’: {‘scenario’: ‘HISTORY’},</div></blockquote>
<p>} # this filter removes all data with ‘HISTORY’ as scenario</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">scmDataFrame with the read data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scmdata.dataframe.ScmDataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyCPA.readData.read_wide_csv_file_pd">
<code class="descclassname">pyCPA.readData.</code><code class="descname">read_wide_csv_file_pd</code><span class="sig-paren">(</span><em>file</em>, <em>folder</em>, <em>col_rename: dict = {}</em>, <em>col_defaults: dict = {}</em>, <em>filter_keep: dict = {}</em>, <em>filter_remove: dict = {}</em>, <em>meta_mapping: dict = {}</em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="reference internal" href="_modules/pyCPA/readData/read_data.html#read_wide_csv_file_pd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyCPA.readData.read_wide_csv_file_pd" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads a csv file and returns the data as a pamdas Dataframe. It is used by
read_wide_csv_folder and can not do the filtering an meta_mapping done by read_wide_csv_file</p>
<p>Columns can be renamed or filled with default vales to match the pyCPA structure.
The individual files are read using “read_wide_csv_data”</p>
<p>Currently duplicate datapoint will not be detected</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file</strong> – String containing the file name</li>
<li><strong>folder</strong> – String with folder name to read from</li>
<li><strong>col_rename</strong> – Dict where the keys are column names in the files to be read and the value is the column file
in the output dataframe. Use ‘DROP’ as value to remove a column. Default = empty</li>
<li><strong>col_defaults</strong> – Dict for default values of columns not given in the csv files. The keys are the column names and
the values are the values for the columns. Default: empty</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">pandas DataFrame with the read data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyCPA.readData.read_wide_csv_folder">
<code class="descclassname">pyCPA.readData.</code><code class="descname">read_wide_csv_folder</code><span class="sig-paren">(</span><em>file_regex</em>, <em>folder</em>, <em>col_rename: dict = {}</em>, <em>col_defaults: dict = {}</em>, <em>meta_mapping: dict = {}</em>, <em>filter_keep: dict = {}</em>, <em>filter_remove: dict = {}</em><span class="sig-paren">)</span> &#x2192; scmdata.run.ScmRun<a class="reference internal" href="_modules/pyCPA/readData/read_data.html#read_wide_csv_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyCPA.readData.read_wide_csv_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads all csv files that match “file_regex” from folder “folder” and returns
them as a single ScmDataFrame</p>
<p>Columns can be renamed or filled with default vales to match the pyCPA structure.
The individual files are read using “read_wide_csv_data”</p>
<p>Currently duplicate datapoint will not be detected</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_regex</strong> – String containing a regular expression that selects the files to read.
Only files matching this expression will be read.</li>
<li><strong>folder</strong> – String with folder name to read from</li>
<li><strong>col_rename</strong> – Dict where the keys are column names in the files to be read and the value is the column file
in the output dataframe. Use ‘DROP’ as value to remove a column. Default = empty</li>
<li><strong>col_defaults</strong> – Dict for default values of columns not given in the csv files. The keys are the column names and
the values are the values for the columns. Default: empty</li>
<li><strong>meta_mapping</strong> – <p>A dict with pyCPA column names as keys. Values are dicts with input values as
keys and output values as values. A standard use case is to map gas names from
input data to the standardized names used in pyCPA / scmdata. Default: empty
Example:
meta_mapping = {</p>
<blockquote>
<div><dl class="docutils">
<dt>’pyCPA_col_1’: {‘col_1_value_1_in’: ‘col_1_value_1_out’,</dt>
<dd>’col_1_value_2_in’: ‘col_1_value_2_out’,
},</dd>
<dt>’pyCPA_col_2’: {‘col_2_value_1_in’: ‘col_2_value_1_out’,</dt>
<dd>’col_2_value_2_in’: ‘col_2_value_2_out’,
},</dd>
</dl>
</div></blockquote>
<p>}</p>
</li>
<li><strong>filter_keep</strong> – <p>Dict defining filters of data to keep. Filtering is done after metadata mapping,
so use mapped metadata values to define the filter. Column names are pyCPA columns.
Each entry in the dict defines an individual filter. The names of the filters have no
relevance. Default: empty
Example:
filter_keep = {</p>
<blockquote>
<div>’f_1’: {‘variable’: [‘CO2’, ‘CH4’], ‘region’: ‘USA’},
‘f_2’: {‘variable’: ‘N2O’}
} # this example filter keeps all CO2 and CH4 data for the USA and N2O data for all countries</div></blockquote>
</li>
<li><strong>filter_remove</strong> – <p>Dict defining filters of data to remove. Filtering is done after metadata mapping,
so use mapped metadata values to define the filter. Column names are pyCPA columns.
Each entry in the dict defines an individual filter. The names of the filters have no
relevance. Default: empty
Example:
filter_remove = {</p>
<blockquote>
<div>’f_1’: {‘scenario’: ‘HISTORY’},</div></blockquote>
<p>} # this filter removes all data with ‘HISTORY’ as scenario</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">scmDataFrame with the read data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scmdata.dataframe.ScmDataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyCPA.readData.read_dataset">
<code class="descclassname">pyCPA.readData.</code><code class="descname">read_dataset</code><span class="sig-paren">(</span><em>config_folder</em>, <em>config_file</em><span class="sig-paren">)</span> &#x2192; scmdata.run.ScmRun<a class="reference internal" href="_modules/pyCPA/readData/read_data.html#read_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyCPA.readData.read_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads a dataset with function and parameters given in the configuration file.
It is a wrapper function for the different data reading functions.
The possible functions are currently hard coded for security reasons</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_file</strong> – A yaml file with allparameters for the data reading including folder and function to use
For an example see ‘example_read_wide_csv_folder.yaml’ in ‘examples/metadata’.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">scmDataFrame with the read data</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scmdata.dataframe.ScmDataFrame</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pyCPA.tools.html" class="btn btn-neutral float-right" title="pyCPA.tools package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pyCPA.core.html" class="btn btn-neutral float-left" title="pyCPA.core package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Johannes Gütschow

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>